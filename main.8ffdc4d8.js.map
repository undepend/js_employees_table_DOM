{"version":3,"sources":["scripts/main.js"],"names":["thead","document","querySelector","headers","querySelectorAll","tbody","toggleSelect","tr","classList","toggle","singleSelect","selected","remove","add","addEventListener","e","targetIndex","target","cellIndex","sort","rows","a","b","cellA","cells","textContent","cellB","slice","split","join","isFinite","localeCompare","contains","append","reverse","row","closest","ctrlKey","metaKey","form","createElement","forEach","head","label","select","option","city","name","toLowerCase","dataset","qa","input","type","step","submit","pushNotification","title","description","message","h2","p","innerText","body","setTimeout","preventDefault","data","FormData","dataObject","Object","fromEntries","entries","trim","length","age","salary","position","newRow","Number","toLocaleString","values","value","cell","field","prevText","index","focus","ev","key","blur"],"mappings":"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","file":"main.8ffdc4d8.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst thead = document.querySelector('thead');\nconst headers = thead.querySelectorAll('th');\nconst tbody = document.querySelector('tbody');\n\n// Table sorting by clicking on the title (in two directions)\n\nthead.addEventListener('click', function(e) {\n  const targetIndex = e.target.cellIndex;\n  const sort = [...tbody.rows].sort((a, b) => {\n    let cellA = a.cells[targetIndex].textContent;\n    let cellB = b.cells[targetIndex].textContent;\n\n    if (cellA[0] === '$' || cellB[0] === '$') {\n      cellA = +cellA.slice(1).split(',').join('');\n      cellB = +cellB.slice(1).split(',').join('');\n\n      return cellA - cellB;\n    }\n\n    if (isFinite(cellA) || isFinite(cellB)) {\n      return cellA - cellB;\n    }\n\n    return cellA.localeCompare(cellB);\n  });\n\n  if (e.target.classList.contains('asc')) {\n    e.target.classList.remove('asc');\n    tbody.append(...sort.reverse());\n  } else {\n    e.target.classList.add('asc');\n    tbody.append(...sort);\n  }\n});\n\n// When clicks on a row, it becomes selected\n\ntbody.addEventListener('click', function(e) {\n  const row = e.target.closest('tr');\n\n  if (e.ctrlKey || e.metaKey) {\n    toggleSelect(row);\n\n    return;\n  }\n\n  singleSelect(row);\n});\n\nfunction toggleSelect(tr) {\n  tr.classList.toggle('active');\n}\n\nfunction singleSelect(tr) {\n  const selected = document.querySelectorAll('.active');\n\n  for (const elem of selected) {\n    elem.classList.remove('active');\n  }\n  tr.classList.add('active');\n}\n\n// Added a form to the document\n// Form allows users to add new employees to the spreadsheet\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\n\nheaders.forEach(head => {\n  const label = document.createElement('label');\n\n  label.textContent = head.textContent;\n\n  if (head.textContent === 'Office') {\n    const select = document.createElement('select');\n    const options = [`Tokyo`, `Singapore`,\n      `London`, `New York`, `Edinburgh`, `San Francisco`];\n\n    options.forEach(option => {\n      const city = document.createElement('option');\n\n      city.textContent = option;\n      select.append(city);\n    });\n\n    select.name = head.textContent.toLowerCase();\n    select.dataset.qa = head.textContent.toLowerCase();\n\n    label.append(select);\n  } else {\n    const input = document.createElement('input');\n\n    if (head.textContent === 'Age' || head.textContent === 'Salary') {\n      input.type = 'number';\n    }\n\n    if (head.textContent === 'Salary') {\n      input.step = 1000;\n    }\n\n    input.name = head.textContent.toLowerCase();\n    input.dataset.qa = head.textContent.toLowerCase();\n\n    label.append(input);\n  }\n\n  form.append(label);\n});\n\nconst submit = document.createElement('button');\n\nsubmit.textContent = `Save to table`;\n\nform.append(submit);\n\ndocument.body.append(form);\n\n// Validation of data in form\n\nsubmit.addEventListener('click', function(e) {\n  e.preventDefault();\n\n  const data = new FormData(form);\n  const dataObject = Object.fromEntries(data.entries());\n\n  if (dataObject.name.trim().length < 4) {\n    pushNotification('error', 'Error',\n      'Name should contain more than 4 letters');\n  } else if (+dataObject.age < 18 || +dataObject.age > 90) {\n    pushNotification('error', 'Error',\n      'Age does not meet the requirements');\n  } else if (dataObject.salary.length > 12) {\n    pushNotification('error', 'Error',\n      'Enter actual salary');\n  } else if (!dataObject.position\n      || dataObject.position.trim().length < 3\n      || !dataObject.salary) {\n    pushNotification('error', 'Error',\n      'All fields are required');\n  } else {\n    pushNotification('success', 'Success', 'New employee was added');\n\n    const newRow = document.createElement('tr');\n\n    dataObject.salary = '$' + Number(dataObject.salary).toLocaleString('en-US');\n\n    Object.values(dataObject).forEach(value => {\n      const cell = document.createElement('td');\n\n      cell.textContent = value;\n\n      newRow.append(cell);\n    });\n\n    tbody.append(newRow);\n\n    form.querySelectorAll('input').forEach(field => {\n      field.value = '';\n    });\n  }\n});\n\n// Editing of table by double click\ntbody.addEventListener('dblclick', (e) => {\n  const prevText = e.target.textContent;\n  const index = e.target.cellIndex;\n\n  e.target.textContent = '';\n\n  let input = document.createElement('input');\n\n  input.classList.add('cell-input');\n\n  if (index === 2) {\n    const select = document.createElement('select');\n    const options = [`Tokyo`, `Singapore`,\n      `London`, `New York`, `Edinburgh`, `San Francisco`];\n\n    options.forEach(option => {\n      const city = document.createElement('option');\n\n      city.textContent = option;\n      city.value = option;\n      select.append(city);\n    });\n\n    input = select;\n  }\n\n  if (index === 3) {\n    input.type = 'number';\n  }\n\n  if (index === 4) {\n    input.type = 'number';\n    input.step = 1000;\n  }\n\n  e.target.append(input);\n  input.focus();\n\n  input.addEventListener('blur', () => {\n    switch (index) {\n      case 0:\n        if (input.value.length < 4) {\n          pushNotification('error', 'Error',\n            'Name should have more than 4 letters');\n          e.target.textContent = prevText;\n        } else {\n          e.target.textContent = input.value;\n        }\n        break;\n\n      case 1:\n        if (input.value) {\n          e.target.textContent = input.value;\n        } else {\n          pushNotification('error', 'Error', 'Enter valid position');\n          e.target.textContent = prevText;\n        }\n        break;\n\n      case 2:\n        (input.value)\n          ? e.target.textContent = input.value\n          : e.target.textContent = prevText;\n        break;\n\n      case 3:\n        if (input.value < 18) {\n          pushNotification('error', 'Error', 'Age must be more than 18');\n          e.target.textContent = prevText;\n        } else if (input.value > 90) {\n          pushNotification('error', 'Error', 'Age must be less than 90');\n          e.target.textContent = prevText;\n        } else {\n          e.target.textContent = input.value;\n        }\n        break;\n\n      case 4:\n        if (input.value) {\n          e.target.textContent = '$'\n          + Number(input.value).toLocaleString('en-US');\n        } else {\n          pushNotification('error', 'Error', 'Enter valid salary');\n          e.target.textContent = prevText;\n        }\n        break;\n\n      default:\n        pushNotification('error', 'Error', 'Unexpected error...');\n    }\n\n    input.remove();\n  });\n\n  input.addEventListener('keydown', ev => {\n    if (ev.key === 'Enter') {\n      input.blur();\n    }\n  });\n});\n\n// Notification\n\nfunction pushNotification(type, title, description) {\n  const message = document.createElement('div');\n  const h2 = document.createElement('h2');\n  const p = document.createElement('p');\n\n  message.append(h2, p);\n\n  message.classList.add('notification', type);\n\n  message.dataset.qa = 'notification';\n\n  h2.innerText = title;\n  h2.classList.add('title');\n  p.innerText = description;\n\n  document.body.append(message);\n\n  setTimeout(function() {\n    message.remove();\n  }, 2000);\n}\n"]}